# SVFFD Motion Tracking Configuration
# Optimized for airway/respiratory motion tracking
# Lighter smoothing for fine motion capture, balanced regularization

pipeline:
  model: "rigid+affine+svffd"

svffd:
  control_point_spacing: 4
  pyramid_levels: 4
  iterations_per_level: [100, 100, 80, 60]
  learning_rates_per_level: [0.01, 0.008, 0.006, 0.005]
  integration_steps: 5
  regularization:
    bending_weight: 0.0008
    diffusion_weight: 0.0004
    velocity_smoothing_sigma: 0.5
    laplacian_weight: 0.0001
    jacobian_penalty: 0.002
  convergence:
    min_delta: 1e-6
    patience: 15

# Rigid/Affine stages
rigid:
  pyramid_levels: 4
  iterations_per_level: [100, 100, 100, 100]
  learning_rates_per_level: [0.01, 0.01, 0.01, 0.01]
  convergence:
    min_delta: 1e-6
    patience: 20

affine:
  pyramid_levels: 4
  iterations_per_level: [100, 100, 100, 100]
  learning_rates_per_level: [0.01, 0.01, 0.01, 0.01]
  convergence:
    min_delta: 1e-6
    patience: 20

similarity:
  num_bins: 64
  foreground_threshold: 0.01

output:
  auto_name: true
  name_template: "svffd_motion_cp{spacing}_bend{bending}_steps{steps}"
