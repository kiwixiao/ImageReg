# SVFFD Standard Configuration
# Conservative starting point for diffeomorphic registration
# Lower learning rate and regularization for smooth velocity fields

pipeline:
  model: "rigid+affine+svffd"

svffd:
  control_point_spacing: 4
  pyramid_levels: 4
  iterations_per_level: [100, 100, 100, 100]
  learning_rates_per_level: [0.005, 0.005, 0.005, 0.005]
  integration_steps: 5
  regularization:
    bending_weight: 0.0005
    diffusion_weight: 0.00025
    velocity_smoothing_sigma: 0.0
    laplacian_weight: 0.0
    jacobian_penalty: 0.0
  convergence:
    min_delta: 1e-6
    patience: 20

# Rigid/Affine stages
rigid:
  pyramid_levels: 4
  iterations_per_level: [100, 100, 100, 100]
  learning_rates_per_level: [0.01, 0.01, 0.01, 0.01]
  convergence:
    min_delta: 1e-6
    patience: 20

affine:
  pyramid_levels: 4
  iterations_per_level: [100, 100, 100, 100]
  learning_rates_per_level: [0.01, 0.01, 0.01, 0.01]
  convergence:
    min_delta: 1e-6
    patience: 20

similarity:
  num_bins: 64
  foreground_threshold: 0.01

output:
  auto_name: true
  name_template: "svffd_std_cp{spacing}_bend{bending}_steps{steps}"
